@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style type="text/css">
    .highCpu {
        background: red;
        color: white;
    }

    .collapsible {
        background-color: #777;
        color: white;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
    }

        .active, .collapsible:hover {
            background-color: #555;
        }

    .content {
        padding: 0 18px;
        display: none;
        overflow: hidden;
        background-color: #f1f1f1;
    }
</style>

<div id="computerInfo">

    <h2>Real-time System Resource Monitor</h2>
    <h5 data-bind="visible: connected">Connected to message hub</h5>
    <div class="table-responsive">
        <table id="tbMachines" border="0" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Machine</th>
                    <th>IP</th>
                    <th>CPU %</th>
                    <th>Memoria Utilizada (Mb)</th>
                    <th>Memoria Total(Mb)</th>
                    <th>Mem Disponible %</th>
                    <th>Disco Duro</th>
                    <th>Sistema Operativo</th>
                    <th>Procesador</th>
                </tr>
            </thead>
            <tbody>
                <!-- ko foreach: machines -->
                <tr data-bind="css: { highCpu: cpu() > 90 }">
                    <td data-bind="text: machineName"></td>
                    <td data-bind="text: ipAddress"></td>
                    <td data-bind="text: cpu"></td>
                    <td data-bind="text: memUsage"></td>
                    <td data-bind="text: memTotal"></td>
                    <td data-bind="text: memPercent"></td>
                    <td data-bind="html: disk"></td>
                    <td data-bind="text: sysos"></td>
                    <td data-bind="html: processador"></td>
                </tr>
                <!-- /ko -->
            </tbody>
        </table>
    </div>


</div>

<div id="servicesInfo">

    <h2>Monitor de Servicios</h2>
    <h5 data-bind="visible: connected">Connected to message hub</h5>
    <div class="table-responsive">
        <table id="tbServices" border="0" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">Servidor</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Versión de Ejecutable</th>
                    <th scope="col">Ruta de Acceso</th>
                    <th scope="col">Versiones de Archivos</th>
                    <th scope="col">Estado</th>
                    <th scope="col">Tipo de Inicio</th>
                </tr>
            </thead>
            <tbody>
                <!-- ko foreach: services -->
                <tr>
                    <td data-bind="text: machineName"></td>
                    <td data-bind="text: serviceDisplayName"></td>
                    <td data-bind="text: serviceVersion"></td>
                    <td data-bind="text: path"></td>
                    <td data-bind="html: filesVersion"></td>
                    <td data-bind="text: status"></td>
                    <td data-bind="text: startType"></td>
                </tr>
                <!-- /ko -->
            </tbody>
        </table>
    </div>

</div>

@section Scripts {
    <script src="~/Scripts/index.js"></script>
}
